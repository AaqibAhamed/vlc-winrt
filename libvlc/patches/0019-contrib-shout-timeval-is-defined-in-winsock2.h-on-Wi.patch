From 77a50e469e3deaa3a2688331f5ad3fb8a45dd8ee Mon Sep 17 00:00:00 2001
From: Steve Lhomme <robux4@ycbcr.xyz>
Date: Thu, 29 Mar 2018 15:06:53 +0200
Subject: [PATCH 19/38] contrib: shout: timeval is defined in winsock2.h on
 Windows

---
 contrib/src/shout/rules.mak           |  1 +
 contrib/src/shout/shout-timeval.patch | 10 ++++++++++
 2 files changed, 11 insertions(+)
 create mode 100644 contrib/src/shout/shout-timeval.patch

diff --git a/contrib/src/shout/rules.mak b/contrib/src/shout/rules.mak
index a61550f9b7..4d6df0e11d 100644
--- a/contrib/src/shout/rules.mak
+++ b/contrib/src/shout/rules.mak
@@ -26,6 +26,7 @@ libshout: libshout-$(SHOUT_VERSION).tar.gz .sum-shout
 	$(APPLY) $(SRC)/shout/no-examples.patch
 	$(APPLY) $(SRC)/shout/shout-strings.patch
 	$(APPLY) $(SRC)/shout/shout-win32.patch
+	$(APPLY) $(SRC)/shout/shout-timeval.patch
 	$(call pkg_static,"shout.pc.in")
 	$(UPDATE_AUTOCONFIG)
 	$(MOVE)
diff --git a/contrib/src/shout/shout-timeval.patch b/contrib/src/shout/shout-timeval.patch
new file mode 100644
index 0000000000..6d05058446
--- /dev/null
+++ b/contrib/src/shout/shout-timeval.patch
@@ -0,0 +1,10 @@
+--- libshout/src/common/timing/timing.c.timeval	2015-01-27 19:08:54.000000000 +0100
++++ libshout/src/common/timing/timing.c	2018-03-29 10:33:11.505409500 +0200
+@@ -35,6 +35,7 @@
+ #ifdef _WIN32
+ #include <windows.h>
+ #include <mmsystem.h>
++#include <winsock2.h>
+ #else
+ #ifdef TIME_WITH_SYS_TIME
+ #  include <sys/time.h>
-- 
2.19.1

